<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Register Site</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <script type="module">
    import { createApp } from 'https://unpkg.com/petite-vue?module';
    import { login } from './js/api/login.js';

    createApp({
      username: '',
      password: '',
      remember_me: false,
      errorMessage: '',

      async login() {
        try {
          this.errorMessage = '';
          await login(
            this.username,
            this.password,
            this.remember_me
          );
          alert("Logowanie zakończone sukcesem!");
        } catch (err) {
          this.errorMessage = err.message || 'Błąd logowania';
        }
      }
          alert("Rejestracja zakończona sukcesem!");
        } catch (err) {
          this.errorMessage = err.message || 'Błąd rejestracji';
        }
      }
    }).mount('#login-app');
  </script>
</head>

<body class="bg-light">
  <div class="container mt-5">
    <div id="login-app" v-scope class="card shadow-sm p-4 mx-auto" style="max-width: 500px;">
      <h2 class="mb-4 text-center">Logowanie</h2>

      <div class="mb-3">
        <input v-model="username" class="form-control" placeholder="Nazwa użytkownika" />
      </div>
      <div class="mb-3">
        <input v-model="password" type="password" class="form-control" placeholder="Hasło" />
      </div>
      <div class="d-grid">
        <button @click="login" class="btn btn-primary">Zaloguj</button>
      </div>

      <p v-if="errorMessage" class="mt-3 text-danger text-center">{{ errorMessage }}</p>
    </div>
  </div>
</body>
</html>
